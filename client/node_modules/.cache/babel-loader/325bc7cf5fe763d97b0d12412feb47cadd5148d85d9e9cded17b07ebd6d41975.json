{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\luisf\\\\Desktop\\\\Proyecto paradigmas react\\\\client\\\\src\\\\context\\\\CartContext.jsx\",\n  _s = $RefreshSig$();\nimport { createContext, useEffect, useState } from \"react\";\nimport axios from \"axios\";\n\n/* Creamos el context, se le puede pasar un valor inicial */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CartContext = /*#__PURE__*/createContext();\nexport const CartProvider = _ref => {\n  _s();\n  let {\n    children\n  } = _ref;\n  /* Creamos un estado para el carrito */\n  const [cartItems, setCartItems] = useState([]);\n  const [products, setProducts] = useState([]);\n  const getProducts = async () => {\n    await axios.get(\"http://localhost:4000/products\").then(_ref2 => {\n      let {\n        data\n      } = _ref2;\n      return setProducts(data.products);\n    });\n  };\n  const getProductsCart = async () => {\n    return await axios.get(\"http://localhost:4000/products-cart\").then(_ref3 => {\n      let {\n        data\n      } = _ref3;\n      return setCartItems(data.productsCart);\n    }).catch(error => console.error(error));\n  };\n  useEffect(() => {\n    getProducts();\n    getProductsCart();\n  }, []);\n  const addItemToCart = async product => {\n    const {\n      name,\n      img,\n      price\n    } = product;\n    await axios.post(\"http://localhost:4000/products-cart\", {\n      name,\n      img,\n      price\n    });\n    getProducts();\n    getProductsCart();\n  };\n  const editItemToCart = async (id, query, amount) => {\n    if (query === \"del\" && amount === 1) {\n      await axios.delete(`http://localhost:4000/products-cart/${id}`).then(_ref4 => {\n        let {\n          data\n        } = _ref4;\n        return console.log(data);\n      });\n    } else {\n      await axios.put(`http://localhost:4000/products-cart/${id}?query=${query}`, {\n        amount\n      }).then(_ref5 => {\n        let {\n          data\n        } = _ref5;\n        return console.log(data);\n      });\n    }\n    getProducts();\n    getProductsCart();\n  };\n  return (\n    /*#__PURE__*/\n    /* Envolvemos el children con el provider y le pasamos un objeto con las propiedades que necesitamos por value */\n    _jsxDEV(CartContext.Provider, {\n      value: {\n        cartItems,\n        products,\n        addItemToCart,\n        editItemToCart\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 5\n    }, this)\n  );\n};\n_s(CartProvider, \"JnNw4OeW+BvjZtSgjbMv2qiBkUU=\");\n_c = CartProvider;\nexport default CartContext;\nvar _c;\n$RefreshReg$(_c, \"CartProvider\");","map":{"version":3,"names":["createContext","useEffect","useState","axios","CartContext","CartProvider","children","cartItems","setCartItems","products","setProducts","getProducts","get","then","data","getProductsCart","productsCart","catch","error","console","addItemToCart","product","name","img","price","post","editItemToCart","id","query","amount","delete","log","put"],"sources":["C:/Users/luisf/Desktop/Proyecto paradigmas react/client/src/context/CartContext.jsx"],"sourcesContent":["import { createContext, useEffect, useState } from \"react\";\nimport axios from \"axios\";\n\n/* Creamos el context, se le puede pasar un valor inicial */\nconst CartContext = createContext();\n\nexport const CartProvider = ({ children }) => {\n  /* Creamos un estado para el carrito */\n  const [cartItems, setCartItems] = useState([]);\n  const [products, setProducts] = useState([]);\n\n  const getProducts = async () => {\n    await axios\n      .get(\"http://localhost:4000/products\")\n      .then(({ data }) => setProducts(data.products));\n  };\n\n  const getProductsCart = async () => {\n    return await axios\n      .get(\"http://localhost:4000/products-cart\")\n      .then(({ data }) => setCartItems(data.productsCart))\n      .catch((error) => console.error(error));\n  };\n\n  useEffect(() => {\n    getProducts();\n    getProductsCart();\n  }, []);\n\n  const addItemToCart = async (product) => {\n    const { name, img, price } = product;\n\n    await axios.post(\"http://localhost:4000/products-cart\", { name, img, price });\n\n    getProducts();\n    getProductsCart();\n  };\n\n  const editItemToCart = async (id, query, amount) => {\n    if (query === \"del\" && amount === 1) {\n      await axios\n        .delete(`http://localhost:4000/products-cart/${id}`)\n        .then(({ data }) => console.log(data));\n    } else {\n      await axios\n        .put(`http://localhost:4000/products-cart/${id}?query=${query}`, {\n          amount,\n        })\n        .then(({ data }) => console.log(data));\n    }\n\n    getProducts();\n    getProductsCart();\n  };\n\n  return (\n    /* Envolvemos el children con el provider y le pasamos un objeto con las propiedades que necesitamos por value */\n    <CartContext.Provider\n      value={{ cartItems, products, addItemToCart, editItemToCart }}\n    >\n      {children}\n    </CartContext.Provider>\n  );\n};\n\nexport default CartContext;\n"],"mappings":";;AAAA,SAASA,aAAa,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC1D,OAAOC,KAAK,MAAM,OAAO;;AAEzB;AAAA;AACA,MAAMC,WAAW,gBAAGJ,aAAa,EAAE;AAEnC,OAAO,MAAMK,YAAY,GAAG,QAAkB;EAAA;EAAA,IAAjB;IAAEC;EAAS,CAAC;EACvC;EACA,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAGN,QAAQ,CAAC,EAAE,CAAC;EAC9C,MAAM,CAACO,QAAQ,EAAEC,WAAW,CAAC,GAAGR,QAAQ,CAAC,EAAE,CAAC;EAE5C,MAAMS,WAAW,GAAG,YAAY;IAC9B,MAAMR,KAAK,CACRS,GAAG,CAAC,gCAAgC,CAAC,CACrCC,IAAI,CAAC;MAAA,IAAC;QAAEC;MAAK,CAAC;MAAA,OAAKJ,WAAW,CAACI,IAAI,CAACL,QAAQ,CAAC;IAAA,EAAC;EACnD,CAAC;EAED,MAAMM,eAAe,GAAG,YAAY;IAClC,OAAO,MAAMZ,KAAK,CACfS,GAAG,CAAC,qCAAqC,CAAC,CAC1CC,IAAI,CAAC;MAAA,IAAC;QAAEC;MAAK,CAAC;MAAA,OAAKN,YAAY,CAACM,IAAI,CAACE,YAAY,CAAC;IAAA,EAAC,CACnDC,KAAK,CAAEC,KAAK,IAAKC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC,CAAC;EAC3C,CAAC;EAEDjB,SAAS,CAAC,MAAM;IACdU,WAAW,EAAE;IACbI,eAAe,EAAE;EACnB,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMK,aAAa,GAAG,MAAOC,OAAO,IAAK;IACvC,MAAM;MAAEC,IAAI;MAAEC,GAAG;MAAEC;IAAM,CAAC,GAAGH,OAAO;IAEpC,MAAMlB,KAAK,CAACsB,IAAI,CAAC,qCAAqC,EAAE;MAAEH,IAAI;MAAEC,GAAG;MAAEC;IAAM,CAAC,CAAC;IAE7Eb,WAAW,EAAE;IACbI,eAAe,EAAE;EACnB,CAAC;EAED,MAAMW,cAAc,GAAG,OAAOC,EAAE,EAAEC,KAAK,EAAEC,MAAM,KAAK;IAClD,IAAID,KAAK,KAAK,KAAK,IAAIC,MAAM,KAAK,CAAC,EAAE;MACnC,MAAM1B,KAAK,CACR2B,MAAM,CAAE,uCAAsCH,EAAG,EAAC,CAAC,CACnDd,IAAI,CAAC;QAAA,IAAC;UAAEC;QAAK,CAAC;QAAA,OAAKK,OAAO,CAACY,GAAG,CAACjB,IAAI,CAAC;MAAA,EAAC;IAC1C,CAAC,MAAM;MACL,MAAMX,KAAK,CACR6B,GAAG,CAAE,uCAAsCL,EAAG,UAASC,KAAM,EAAC,EAAE;QAC/DC;MACF,CAAC,CAAC,CACDhB,IAAI,CAAC;QAAA,IAAC;UAAEC;QAAK,CAAC;QAAA,OAAKK,OAAO,CAACY,GAAG,CAACjB,IAAI,CAAC;MAAA,EAAC;IAC1C;IAEAH,WAAW,EAAE;IACbI,eAAe,EAAE;EACnB,CAAC;EAED;IAAA;IACE;IACA,QAAC,WAAW,CAAC,QAAQ;MACnB,KAAK,EAAE;QAAER,SAAS;QAAEE,QAAQ;QAAEW,aAAa;QAAEM;MAAe,CAAE;MAAA,UAE7DpB;IAAQ;MAAA;MAAA;MAAA;IAAA;EACY;AAE3B,CAAC;AAAC,GAzDWD,YAAY;AAAA,KAAZA,YAAY;AA2DzB,eAAeD,WAAW;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}